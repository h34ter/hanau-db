<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hanau City Network - Interactive Dashboard</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .dashboard {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 40px;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .breadcrumb {
            background: rgba(255,255,255,0.2);
            padding: 15px 25px;
            border-radius: 10px;
            color: white;
            margin-bottom: 20px;
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .breadcrumb-item {
            cursor: pointer;
            padding: 5px 10px;
            border-radius: 5px;
            transition: background 0.3s;
        }

        .breadcrumb-item:hover {
            background: rgba(255,255,255,0.2);
        }

        .breadcrumb-separator {
            opacity: 0.7;
        }

        .network-container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        .current-node {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 15px;
            color: white;
        }

        .current-node h2 {
            font-size: 2em;
            margin-bottom: 10px;
        }

        .current-node .node-type {
            font-size: 1.1em;
            opacity: 0.9;
            margin-bottom: 15px;
        }

        .node-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin-top: 15px;
        }

        .detail-item {
            background: rgba(255,255,255,0.1);
            padding: 10px 15px;
            border-radius: 8px;
            backdrop-filter: blur(10px);
        }

        .detail-item strong {
            display: block;
            font-size: 0.85em;
            opacity: 0.8;
            margin-bottom: 5px;
        }

        .subordinates-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
        }

        .node-card {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            padding: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .node-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 6px;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            transform: scaleX(0);
            transition: transform 0.3s ease;
        }

        .node-card:hover::before {
            transform: scaleX(1);
        }

        .node-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            border-color: #667eea;
        }

        .node-card.organization {
            border-left: 5px solid #2196F3;
        }

        .node-card.person {
            border-left: 5px solid #4CAF50;
        }

        .node-card h3 {
            font-size: 1.3em;
            margin-bottom: 10px;
            color: #333;
        }

        .node-card .role {
            color: #666;
            font-size: 0.95em;
            margin-bottom: 12px;
            font-style: italic;
        }

        .node-card .type-badge {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .node-card.organization .type-badge {
            background: #E3F2FD;
            color: #1976D2;
        }

        .node-card.person .type-badge {
            background: #E8F5E9;
            color: #388E3C;
        }

        .sentiment-bar {
            height: 8px;
            background: #f0f0f0;
            border-radius: 4px;
            overflow: hidden;
            margin: 10px 0;
        }

        .sentiment-fill {
            height: 100%;
            transition: width 0.3s ease;
        }

        .contact-info {
            font-size: 0.85em;
            color: #666;
            margin-top: 10px;
        }

        .contact-info div {
            margin: 4px 0;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .contact-info svg {
            width: 14px;
            height: 14px;
            opacity: 0.6;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #999;
        }

        .empty-state svg {
            width: 80px;
            height: 80px;
            opacity: 0.3;
            margin-bottom: 20px;
        }

        .back-button {
            display: inline-block;
            padding: 12px 25px;
            background: rgba(255,255,255,0.2);
            color: white;
            border: 2px solid white;
            border-radius: 10px;
            cursor: pointer;
            margin-bottom: 20px;
            transition: all 0.3s;
            backdrop-filter: blur(10px);
        }

        .back-button:hover {
            background: white;
            color: #667eea;
        }

        .stats-bar {
            display: flex;
            gap: 20px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .stat-card {
            flex: 1;
            min-width: 150px;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            padding: 20px;
            border-radius: 12px;
            text-align: center;
        }

        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #667eea;
        }

        .stat-label {
            color: #666;
            font-size: 0.9em;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <div class="dashboard">
        <div class="header">
            <h1>üèõÔ∏è Hanau City Network</h1>
            <p>Interactive Organizational Structure Dashboard</p>
        </div>

        <div id="breadcrumb" class="breadcrumb">
            <span class="breadcrumb-item" onclick="navigateTo('stadt_hanau')">üè† Home</span>
        </div>

        <div class="network-container">
            <div id="current-node" class="current-node"></div>
            <div id="stats" class="stats-bar"></div>
            <div id="subordinates" class="subordinates-grid"></div>
        </div>
    </div>

    <script>
        const data = {
            nodes: {
                stadt_hanau: {
                    id: 'stadt_hanau',
                    name: 'Stadt Hanau',
                    type: 'City Administration',
                    category: 'organization',
                    subordinates: ['magistrat', 'holding', 'immobilien']
                },
                magistrat: {
                    id: 'magistrat',
                    name: 'Magistrat',
                    type: 'City Government',
                    category: 'organization',
                    parent: 'stadt_hanau',
                    subordinates: ['kaminsky', 'bieri', 'hemsley']
                },
                holding: {
                    id: 'holding',
                    name: 'BeteiligungsHolding Hanau GmbH',
                    type: 'Municipal Holding Company',
                    category: 'organization',
                    parent: 'stadt_hanau',
                    subordinates: ['menzen', 'stadtwerke', 'baeder', 'hafen', 'marketing', 'wirtschaft', 'bhg_it']
                },
                immobilien: {
                    id: 'immobilien',
                    name: 'Hanau Immobilien- und Baumanagement',
                    type: 'Property Management',
                    category: 'organization',
                    parent: 'stadt_hanau',
                    phone: '06181/295-397',
                    email: 'hanau-ibm@hanau.de',
                    subordinates: []
                },
                stadtwerke: {
                    id: 'stadtwerke',
                    name: 'Stadtwerke Hanau GmbH',
                    type: 'Energy & Utilities',
                    category: 'organization',
                    parent: 'holding',
                    subordinates: ['butz', 'netz']
                },
                netz: {
                    id: 'netz',
                    name: 'Hanau Netz GmbH',
                    type: 'Network Operator',
                    category: 'organization',
                    parent: 'stadtwerke',
                    phone: '06181/365-13',
                    email: 'info@hanau-netz.de',
                    subordinates: ['szabo']
                },
                baeder: {
                    id: 'baeder',
                    name: 'Hanau B√§der GmbH',
                    type: 'Public Swimming Pools',
                    category: 'organization',
                    parent: 'holding',
                    phone: '06181/365-6900',
                    email: 'verwaltung@hanaubaeder.de',
                    subordinates: []
                },
                hafen: {
                    id: 'hafen',
                    name: 'Hanau Hafen GmbH',
                    type: 'Port Authority',
                    category: 'organization',
                    parent: 'holding',
                    email: 'info@hanau-hafen.de',
                    subordinates: ['menzen']
                },
                marketing: {
                    id: 'marketing',
                    name: 'Hanau Marketing GmbH',
                    type: 'City Marketing',
                    category: 'organization',
                    parent: 'holding',
                    phone: '06181/2950-2188',
                    subordinates: ['bieberle', 'freimuth']
                },
                wirtschaft: {
                    id: 'wirtschaft',
                    name: 'Hanau Wirtschaftsf√∂rderung GmbH',
                    type: 'Economic Development',
                    category: 'organization',
                    parent: 'holding',
                    phone: '06181/2950-2194',
                    email: 'Wirtschaftsfoerderung@hanau.de',
                    subordinates: []
                },
                bhg_it: {
                    id: 'bhg_it',
                    name: 'bhg.it',
                    type: 'IT Services',
                    category: 'organization',
                    parent: 'holding',
                    subordinates: []
                },
                kaminsky: {
                    id: 'kaminsky',
                    name: 'Claus Kaminsky',
                    role: 'Oberb√ºrgermeister (Mayor)',
                    category: 'person',
                    parent: 'magistrat',
                    email: 'ob.clauskaminsky@hanau.de',
                    phone: '06181/295-250',
                    sentiment: 75,
                    subordinates: []
                },
                bieri: {
                    id: 'bieri',
                    name: 'Dr. Maximilian Bieri',
                    role: 'B√ºrgermeister (Deputy Mayor)',
                    category: 'person',
                    parent: 'magistrat',
                    email: 'Buergermeister.bieri@hanau.de',
                    phone: '06181/2950-3000',
                    sentiment: 70,
                    subordinates: []
                },
                hemsley: {
                    id: 'hemsley',
                    name: 'Isabelle Hemsley',
                    role: 'Hauptamtliche Stadtr√§tin',
                    category: 'person',
                    parent: 'magistrat',
                    sentiment: 65,
                    subordinates: []
                },
                menzen: {
                    id: 'menzen',
                    name: 'Markus Menzen',
                    role: 'Gesch√§ftsf√ºhrer (CEO)',
                    category: 'person',
                    parent: 'holding',
                    sentiment: 80,
                    subordinates: []
                },
                butz: {
                    id: 'butz',
                    name: 'Martina Butz',
                    role: 'Gesch√§ftsf√ºhrerin',
                    category: 'person',
                    parent: 'stadtwerke',
                    sentiment: 85,
                    subordinates: []
                },
                szabo: {
                    id: 'szabo',
                    name: 'Adrian Szabo',
                    role: 'Gesch√§ftsf√ºhrer',
                    category: 'person',
                    parent: 'netz',
                    email: 'info@hanau-netz.de',
                    phone: '06181/365-13',
                    sentiment: 72,
                    subordinates: []
                },
                bieberle: {
                    id: 'bieberle',
                    name: 'Martin Bieberle',
                    role: 'Gesch√§ftsf√ºhrer',
                    category: 'person',
                    parent: 'marketing',
                    sentiment: 68,
                    subordinates: []
                },
                freimuth: {
                    id: 'freimuth',
                    name: 'Daniel Freimuth',
                    role: 'Gesch√§ftsf√ºhrer',
                    category: 'person',
                    parent: 'marketing',
                    sentiment: 70,
                    subordinates: []
                }
            },
            currentPath: ['stadt_hanau']
        };

        function getSentimentColor(sentiment) {
            if (!sentiment) return '#ccc';
            if (sentiment <= 50) {
                const r = Math.floor(128 + (sentiment / 50) * 127);
                const g = Math.floor((sentiment / 50) * 255);
                return `rgb(${r}, ${g}, 0)`;
            } else {
                const r = Math.floor(255 - ((sentiment - 50) / 50) * 255);
                return `rgb(${r}, 255, 0)`;
            }
        }

        function renderCurrentNode(nodeId) {
            const node = data.nodes[nodeId];
            const currentNodeDiv = document.getElementById('current-node');

            let detailsHtml = '<div class="node-details">';
            if (node.type) detailsHtml += `<div class="detail-item"><strong>Type</strong>${node.type}</div>`;
            if (node.role) detailsHtml += `<div class="detail-item"><strong>Role</strong>${node.role}</div>`;
            if (node.email) detailsHtml += `<div class="detail-item"><strong>Email</strong>${node.email}</div>`;
            if (node.phone) detailsHtml += `<div class="detail-item"><strong>Phone</strong>${node.phone}</div>`;
            if (node.sentiment) detailsHtml += `<div class="detail-item"><strong>Sentiment</strong>${node.sentiment}/100</div>`;
            detailsHtml += '</div>';

            currentNodeDiv.innerHTML = `
                <h2>${node.name}</h2>
                ${node.type ? `<div class="node-type">${node.type}</div>` : ''}
                ${node.role ? `<div class="node-type">${node.role}</div>` : ''}
                ${detailsHtml}
            `;
        }

        function renderStats(nodeId) {
            const node = data.nodes[nodeId];
            const statsDiv = document.getElementById('stats');

            const totalSubordinates = node.subordinates.length;
            const orgs = node.subordinates.filter(id => data.nodes[id].category === 'organization').length;
            const people = node.subordinates.filter(id => data.nodes[id].category === 'person').length;

            statsDiv.innerHTML = `
                <div class="stat-card">
                    <div class="stat-number">${totalSubordinates}</div>
                    <div class="stat-label">Total Subordinates</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">${orgs}</div>
                    <div class="stat-label">Organizations</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">${people}</div>
                    <div class="stat-label">People</div>
                </div>
            `;
        }

        function renderSubordinates(nodeId) {
            const node = data.nodes[nodeId];
            const subordinatesDiv = document.getElementById('subordinates');

            if (node.subordinates.length === 0) {
                subordinatesDiv.innerHTML = `
                    <div class="empty-state">
                        <svg fill="currentColor" viewBox="0 0 20 20">
                            <path d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z"/>
                        </svg>
                        <h3>No Subordinates</h3>
                        <p>This is a leaf node in the organizational structure</p>
                    </div>
                `;
                return;
            }

            subordinatesDiv.innerHTML = node.subordinates.map(subId => {
                const sub = data.nodes[subId];
                const isPerson = sub.category === 'person';

                let cardContent = `
                    <div class="node-card ${sub.category}" onclick="navigateTo('${subId}')">
                        <div class="type-badge">${isPerson ? 'üë§ Person' : 'üè¢ Organization'}</div>
                        <h3>${sub.name}</h3>
                        ${sub.role ? `<div class="role">${sub.role}</div>` : ''}
                        ${sub.type ? `<div class="role">${sub.type}</div>` : ''}
                `;

                if (isPerson && sub.sentiment) {
                    cardContent += `
                        <div class="sentiment-bar">
                            <div class="sentiment-fill" style="width: ${sub.sentiment}%; background: ${getSentimentColor(sub.sentiment)}"></div>
                        </div>
                        <div style="font-size: 0.85em; color: #666;">Sentiment: ${sub.sentiment}/100</div>
                    `;
                }

                if (sub.email || sub.phone) {
                    cardContent += '<div class="contact-info">';
                    if (sub.email) cardContent += `<div>üìß ${sub.email}</div>`;
                    if (sub.phone) cardContent += `<div>üìû ${sub.phone}</div>`;
                    cardContent += '</div>';
                }

                if (sub.subordinates && sub.subordinates.length > 0) {
                    cardContent += `<div style="margin-top: 10px; font-size: 0.85em; color: #667eea; font-weight: 600;">‚Üí ${sub.subordinates.length} subordinate${sub.subordinates.length > 1 ? 's' : ''}</div>`;
                }

                cardContent += '</div>';
                return cardContent;
            }).join('');
        }

        function renderBreadcrumb() {
            const breadcrumbDiv = document.getElementById('breadcrumb');
            breadcrumbDiv.innerHTML = data.currentPath.map((nodeId, index) => {
                const node = data.nodes[nodeId];
                const isLast = index === data.currentPath.length - 1;
                return `
                    <span class="breadcrumb-item" onclick="navigateToIndex(${index})">${node.name}</span>
                    ${!isLast ? '<span class="breadcrumb-separator">‚Ä∫</span>' : ''}
                `;
            }).join('');
        }

        function navigateTo(nodeId) {
            const currentIndex = data.currentPath.indexOf(nodeId);

            if (currentIndex !== -1) {
                data.currentPath = data.currentPath.slice(0, currentIndex + 1);
            } else {
                data.currentPath.push(nodeId);
            }

            render();
        }

        function navigateToIndex(index) {
            data.currentPath = data.currentPath.slice(0, index + 1);
            render();
        }

        function render() {
            const currentNodeId = data.currentPath[data.currentPath.length - 1];
            renderBreadcrumb();
            renderCurrentNode(currentNodeId);
            renderStats(currentNodeId);
            renderSubordinates(currentNodeId);
        }

        // Initial render
        render();
    </script>
</body>
</html>
