<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Hanau City Org Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    /* Reset and theme colors */
    html, body { height: 100%; margin: 0; padding: 0; }
    body {
      min-height: 100vh;
      background: #111317;
      font-family: 'Inter', Segoe UI, Arial, sans-serif;
      color: #fafafa;
      letter-spacing: 0.01em;
    }
    .dashboard {
      max-width: 1400px;
      margin: 0 auto;
      padding: 32px 8px;
    }
    .header {
      text-align: center;
      margin-bottom: 2.5em;
    }
    .header h1 {
      font-size: 2.5em;
      letter-spacing: -0.03em;
      font-weight: 800;
      color: #8BCDFF;
      text-shadow: 0 8px 32px #000d,0 1px 1px #222b;
    }
    .header p {
      font-size: 1.15em;
      color: #b9bbbe;
      opacity: 0.9;
    }
    .breadcrumb {
      display: flex; flex-wrap: wrap; min-height: 35px;
      gap: .5em; align-items: center; margin-bottom: 18px;
    }
    .breadcrumb-item {
      cursor: pointer;
      color: #8bcdff; font-weight: 500;
      padding: 2px 10px;
      border-radius: 8px;
      background: #16181d;
      transition: background .23s, color .23s;
      font-size: 1.08em;
    }
    .breadcrumb-item:hover, .breadcrumb-item.active {
      background: #1d2634; color: #fff;
    }
    .breadcrumb-separator {
      color: #555a;
      user-select: none;
    }
    .network-container {
      background: linear-gradient(135deg,#181e28 40%,#14151a 100%);
      border-radius: 20px;
      box-shadow: 0 10px 34px #060b 0.12;
      padding: 2.5em 1.5em 2.5em 1.5em;
      margin-bottom: 2em;
      animation: fadeIn .6s;
    }
    @keyframes fadeIn { from { opacity: 0;transform: translateY(42px);} to{opacity:1;transform:translateY(0)} }
    .current-node {
      text-align: center;
      margin-bottom: 2.2em;
      animation: fadeIn .45s;
    }
    .current-node h2 {
      font-size: 2em;
      color: #fff;
      font-weight: 700;
      margin: .1em 0 .1em 0;
    }
    .current-node .node-type {
      font-size: 1.1em;
      color: #b9bbbe;
      margin-bottom: .8em;
      letter-spacing: 0.01em;
      font-style: italic
    }
    .node-details {
      margin: 0 auto 8px auto;
      display: flex; flex-wrap: wrap; justify-content: center;
      gap: 1.6em 2.3em;
      color: #b9bbbe; font-size: 1.07em;
    }
    .detail-item strong { color: #8BCDFF; display:block; font-size:0.93em;}
    .stats-bar { display: flex; gap: 24px; flex-wrap: wrap; justify-content: center; margin-bottom:1.6em;}
    .stat-card { background: #151521; border-radius:9px; padding:23px 24px; text-align:center; min-width:130px; }
    .stat-number { font-size:1.5em;color:#8bcdff; font-family:monospace; font-weight:bold;}
    .stat-label {margin-top:4px;color:#c1c8dc;font-size:.96em;opacity:.76;}
    .subordinates-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(325px, 1fr));
      gap: 24px;
      margin-top: 1em;
    }
    .node-card {
      position: relative;
      background: #16181d;
      box-shadow: 0 2px 8px #10152460;
      border: none;
      border-radius: 13px;
      padding: 30px 26px 17px 26px;
      cursor: pointer;
      transition: box-shadow .26s, background .18s, transform .12s;
      overflow: hidden;
      color: #fafafa;
      animation: fadeIn .26s;
    }
    .node-card:before {
      content: ''; display:block;
      position:absolute;top:0;left:0;width:100%;height:7px;
      background: linear-gradient(90deg,#8bcdff60,#07dfc3c0 60%,#8160ec60);
      border-radius:0 0 8px 8px;opacity:.3;
      transition:opacity .3s;
    }
    .node-card.organization { border-left: 4px solid #00a1e6; }
    .node-card.person { border-left: 4px solid #07dfc3; }
    .node-card:hover { background:#1f2230; transform: translateY(-2px) scale(1.01); box-shadow:0 8px 28px #08145060;}
    .node-card h3 { font-size: 1.21em; margin-bottom: 9px; color: #bbf2ff; font-weight: bold; }
    .node-card .role { color: #86a1be; font-size: 1em; margin-bottom: 6px; font-style: italic;}
    .node-card .type-badge {
      display: inline-block;
      padding: 6px 15px;
      border-radius: 20px;
      font-size: 0.98em;
      font-weight: 600;
      background: #262c38;
      color: #83faff;
      margin-bottom: 10px;
    }
    .node-card.organization .type-badge { background: #1e3246; color:#8bcdff; }
    .node-card.person .type-badge { background: #15332f; color: #07dfc3; }
    .sentiment-bar { height: 8px; background: #333940; border-radius: 4px; margin:10px 0 3px 0; }
    .sentiment-fill { height:100%;transition:width .23s;}
    .contact-info { font-size: 0.92em; color: #aaa; margin-top: 15px;}
    .contact-info div { margin: 2.7px 0;}
    .empty-state {
      text-align: center; color: #666;
      grid-column: 1/-1;
      padding: 50px 8px;
      animation: fadeIn .3s;
    }
    .empty-state svg { width: 60px; height:60px; opacity:.16; margin-bottom:17px}
    @media (max-width:680px){
      .network-container,.dashboard{padding:10px;}
      .header h1{font-size:1.3em;}
      .subordinates-grid{grid-template-columns:1fr;}
      .node-card{padding:12px;}
    }
  </style>
</head>
<body>
  <div class="dashboard">
    <div class="header">
      <h1>üèõÔ∏è Hanau City Org Dashboard</h1>
      <p>Ultra-smooth, drill-down interactive org chart</p>
    </div>
    <div id="breadcrumb" class="breadcrumb"></div>
    <div class="network-container">
      <div id="current-node" class="current-node"></div>
      <div id="stats" class="stats-bar"></div>
      <div id="subordinates" class="subordinates-grid"></div>
    </div>
  </div>
<script>
const data = {
  nodes: {
    stadt_hanau: { id:'stadt_hanau', name:'Stadt Hanau', type:'City Administration', category:'organization', subordinates:['magistrat','holding','immobilien'] },
    magistrat: { id:'magistrat', name:'Magistrat',type:'City Govt',category:'organization',parent:'stadt_hanau',subordinates:['kaminsky','bieri','hemsley'] },
    holding: { id:'holding', name:'BeteiligungsHolding Hanau GmbH',type:'Holding',category:'organization',parent:'stadt_hanau', subordinates:['menzen','stadtwerke','baeder','hafen','marketing','wirtschaft','bhg_it'] },
    immobilien: { id:'immobilien',name:'Hanau Immobilien- und Baumanagement',type:'Property Mgmt',category:'organization',parent:'stadt_hanau',phone:'06181/295-397',email:'hanau-ibm@hanau.de',subordinates:[] },
    stadtwerke: { id:'stadtwerke', name:'Stadtwerke Hanau GmbH',type:'Energy & Utilities',category:'organization',parent:'holding',subordinates:['butz','netz'] },
    netz: { id:'netz', name:'Hanau Netz GmbH', type:'Grid Operator',category:'organization',parent:'stadtwerke',phone:'06181/365-13',email:'info@hanau-netz.de',subordinates:['szabo'] },
    baeder: { id:'baeder', name:'Hanau B√§der GmbH',type:'Public Swimming Pools',category:'organization',parent:'holding',phone:'06181/365-6900',email:'verwaltung@hanaubaeder.de', subordinates:[] },
    hafen: { id:'hafen', name:'Hanau Hafen GmbH', type:'Port Authority',category:'organization',parent:'holding',email:'info@hanau-hafen.de', subordinates:['menzen'] },
    marketing: { id:'marketing', name:'Hanau Marketing GmbH',type:'City Marketing',category:'organization',parent:'holding',phone:'06181/2950-2188', subordinates:['bieberle','freimuth'] },
    wirtschaft: { id:'wirtschaft',name:'Hanau Wirtschaftsf√∂rderung GmbH',type:'Economic Dev.',category:'organization',parent:'holding',phone:'06181/2950-2194', email:'Wirtschaftsfoerderung@hanau.de',subordinates:[] },
    bhg_it: { id:'bhg_it', name:'bhg.it',type:'IT Services',category:'organization',parent:'holding',subordinates:[] },
    kaminsky: { id:'kaminsky', name:'Claus Kaminsky', role:'Oberb√ºrgermeister',category:'person',parent:'magistrat',email:'ob.clauskaminsky@hanau.de', phone:'06181/295-250', sentiment:75, subordinates:[] },
    bieri: { id:'bieri', name:'Dr. Maximilian Bieri', role:'B√ºrgermeister',category:'person',parent:'magistrat',email:'Buergermeister.bieri@hanau.de', phone:'06181/2950-3000', sentiment:70, subordinates:[] },
    hemsley: { id:'hemsley', name:'Isabelle Hemsley', role:'Stadtr√§tin',category:'person',parent:'magistrat', sentiment:65, subordinates:[] },
    menzen: { id:'menzen', name:'Markus Menzen', role:'Gesch√§ftsf√ºhrer',category:'person',parent:'holding',sentiment:80,subordinates:[] },
    butz: { id:'butz', name:'Martina Butz', role:'Gesch√§ftsf√ºhrerin',category:'person',parent:'stadtwerke',sentiment:85,subordinates:[] },
    szabo: { id:'szabo',name:'Adrian Szabo',role:'Gesch√§ftsf√ºhrer',category:'person',parent:'netz',email:'info@hanau-netz.de',phone:'06181/365-13',sentiment:72,subordinates:[] },
    bieberle: { id:'bieberle', name:'Martin Bieberle',role:'Gesch√§ftsf√ºhrer',category:'person',parent:'marketing',sentiment:68,subordinates:[] },
    freimuth: { id:'freimuth', name:'Daniel Freimuth',role:'Gesch√§ftsf√ºhrer',category:'person',parent:'marketing',sentiment:70,subordinates:[] }
  },
  currentPath: ['stadt_hanau']
};

function getSentimentColor(sentiment){
  if(!sentiment) return '#888';
  if(sentiment<=50){
    const r=Math.floor(128+(sentiment/50)*127),g=Math.floor((sentiment/50)*255);
    return `rgb(${r},${g},0)`;
  }else{
    const r=Math.floor(255-((sentiment-50)/50)*255);
    return `rgb(${r},255,0)`;
  }
}
function renderCurrentNode(nodeId){
  const node=data.nodes[nodeId],el=document.getElementById('current-node');
  let details='<div class="node-details">';
  if(node.type) details+=`<div class="detail-item"><strong>Type</strong>${node.type}</div>`;
  if(node.role) details+=`<div class="detail-item"><strong>Role</strong>${node.role}</div>`;
  if(node.email) details+=`<div class="detail-item"><strong>Email</strong>${node.email}</div>`;
  if(node.phone) details+=`<div class="detail-item"><strong>Phone</strong>${node.phone}</div>`;
  if(node.sentiment) details+=`<div class="detail-item"><strong>Sentiment</strong>${node.sentiment}/100</div>`;
  details+='</div>';
  el.innerHTML=`<h2>${node.name}</h2>${
    node.type?`<div class="node-type">${node.type}</div>`:''}${
    node.role?`<div class="node-type">${node.role}</div>`:''}${details}`;
}
function renderStats(nodeId){
  const node=data.nodes[nodeId],el=document.getElementById('stats'),total=node.subordinates.length,
    orgs=node.subordinates.filter(id=>data.nodes[id].category==='organization').length,
    people=node.subordinates.filter(id=>data.nodes[id].category==='person').length;
  el.innerHTML=`
    <div class="stat-card"><div class="stat-number">${total}</div><div class="stat-label">Total Subordinates</div></div>
    <div class="stat-card"><div class="stat-number">${orgs}</div><div class="stat-label">Organizations</div></div>
    <div class="stat-card"><div class="stat-number">${people}</div><div class="stat-label">People</div></div>`;
}
function renderSubordinates(nodeId){
  const node=data.nodes[nodeId],el=document.getElementById('subordinates');
  if(node.subordinates.length===0){
    el.innerHTML=`<div class="empty-state">
      <svg fill="currentColor" viewBox="0 0 20 20"><path d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z"/></svg>
      <h3>No Subordinates</h3><p>This is a leaf node.</p>
    </div>`; return;
  }
  el.innerHTML=node.subordinates.map(subId=>{
    const sub=data.nodes[subId],isPerson=sub.category==='person';
    let h=`<div class="node-card ${sub.category}" onclick="navigateTo('${subId}')">
      <div class="type-badge">${isPerson?'üë§ Person':'üè¢ Organization'}</div>
      <h3>${sub.name}</h3>${sub.role?`<div class="role">${sub.role}</div>`:''}${sub.type?`<div class="role">${sub.type}</div>`:''}`;
    if(isPerson&&sub.sentiment){
      h+=`<div class="sentiment-bar"><div class="sentiment-fill" style="width:${sub.sentiment}%;background:${getSentimentColor(sub.sentiment)}"></div></div>
      <div style="font-size:0.89em;color:#99e">Sentiment: ${sub.sentiment}/100</div>`;
    }
    if(sub.email||sub.phone){
      h+='<div class="contact-info">';
      if(sub.email) h+=`<div>üìß ${sub.email}</div>`;
      if(sub.phone) h+=`<div>üìû ${sub.phone}</div>`;
      h+='</div>';
    }
    if(sub.subordinates&&sub.subordinates.length>0){
      h+=`<div style="margin-top:10px;font-size:.92em;color:#8bcdff;font-weight:600">‚Üí ${sub.subordinates.length} subordinate${sub.subordinates.length>1?'s':''}</div>`;
    }
    h+='</div>'; return h;
  }).join('');
}
function renderBreadcrumb(){
  const el=document.getElementById('breadcrumb');
  el.innerHTML=data.currentPath.map((nodeId,i)=>{
    const node=data.nodes[nodeId],last=i===data.currentPath.length-1;
    return `<span class="breadcrumb-item${last?' active':''}" onclick="navigateToIndex(${i})">${node.name}</span>${!last?'<span class="breadcrumb-separator">‚Ä∫</span>':''}`;
  }).join('');
}
function navigateTo(nodeId){
  const idx=data.currentPath.indexOf(nodeId);
  if(idx!==-1)data.currentPath=data.currentPath.slice(0,idx+1);
  else data.currentPath.push(nodeId);
  render();
}
function navigateToIndex(i){data.currentPath=data.currentPath.slice(0,i+1);render();}
function render(){const id=data.currentPath[data.currentPath.length-1];
  renderBreadcrumb(); renderCurrentNode(id); renderStats(id); renderSubordinates(id);
}
render();
</script>
</body>
</html>
